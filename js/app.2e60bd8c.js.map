{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?0c5b","webpack:///./src/App.vue","webpack:///./src/App.vue?eabf","webpack:///./src/views/Editor.vue","webpack:///./src/editorJs/editor-modes.js","webpack:///./src/editorJs/register-node.js","webpack:///./src/editorJs/register-edge.js","webpack:///./src/editorJs/registration-events.js","webpack:///./src/views/Editor.vue?a696","webpack:///./src/views/Editor.vue?1648","webpack:///./src/router/index.ts","webpack:///./src/store/index.ts","webpack:///./src/main.ts","webpack:///./src/views/Editor.vue?5f0e"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","render","width","class","functionData","item","index","draggable","data-type","label","id","mainClass","title","drawer","direction","before-close","handleCloseDrawer","preChoiceNode","EditorModes","editorData","enableDelegate","enableDebounce","enableOptimize","shouldBegin","trigger","edgeConfig","graph","getNodes","set","startDragNodeIdx","sourceAnchorIdx","shouldEnd","skip","$message","getInEdges","forEach","targetAnchorIdx","RegisterNode","G6","isDragStart","on","dragStartState","registerNode","afterDraw","cfg","group","bBox","getBBox","anchorPoints","this","getAnchorPoints","anchorPos","addShape","attrs","x","y","height","fill","opacity","visible","stroke","cursor","anchorPointIdx","links","hideOrShowAnchorPoint","nodeName","getContainer","findAll","ele","point","show","hide","setState","lineDash","RegisterEdge","registerEdge","shape","animate","res","lineDashOffset","lineWidth","endArrow","path","Arrow","triangle","repeat","duration","stopAnimate","attr","RegistrationEvents","updateItem","edge","sourceAnchor","targetAnchor","edges","save","getEdges","curveOffset","curvePosition","getType","source","sourceNode","findById","targetNode","isNaN","sourceAnchorShape","find","targetAnchorShape","originalEvent","dataTransfer","_shapData","JSON","parse","getData","addShap","evt","setItemState","emit","ShowOrHideAnchorPoint","showDrawer","clearItemStates","initCanvasMouseAnimation","allNodes","points","pointBacks","pointBack","style","components","graphData","graphComponentId","initialPosition","mounted","initGraph","setRegisterNode","setRegisterEdge","setRegisterEvent","methods","that","_minimap","Minimap","size","_tooltip","Tooltip","_grid","Grid","_menu","Menu","itemTypes","getContent","outDiv","textAlign","fontSize","innerHTML","handleMenuClick","removeItem","Graph","container","plugins","modes","getEditorModes","nodeStateStyles","active","defaultEdge","defaultNode","labelCfg","read","node","shapData","addItem","__scopeId","routes","component","Editor","router","history","state","mutations","actions","App","use","store","mount"],"mappings":"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","file":"js/app.2e60bd8c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"87235a7f\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=5617787a&lang=css\"","<!--\r\n * @Description: \r\n * @Author: 杨云龙\r\n * @Date: 2021-06-21 10:11:00\r\n * @LastEditTime: 2021-07-06 11:38:09\r\n-->\r\n<template>\r\n  <router-view />\r\n</template>\r\n\r\n<style>\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.g6-minimap {\r\n  position: fixed;\r\n  left: 220px;\r\n  bottom: 50px;\r\n  background: white;\r\n  border: 1px solid black;\r\n}\r\n.lableMenuText:hover {\r\n  color: blue;\r\n  border: 1px solid lightblue;\r\n}\r\n\r\n</style>\r\n","import { render } from \"./App.vue?vue&type=template&id=5617787a\"\nconst script = {}\n\nimport \"./App.vue?vue&type=style&index=0&id=5617787a&lang=css\"\nscript.render = render\n\nexport default script","<!--\n * @Description : 流程图编辑器\n * @Author      : 杨云龙\n * @Date        : 2021-06-21 10: 11: 00\n * @LastEditTime: 2021-07-15 20:23:23\n-->\n<template>\n  <el-container>\n    <el-aside width=\"200px\" class=\"sidebar\">\n      <el-button\n        draggable=\"true\"\n        @dragstart=\"\n          (e) => {\n            e.dataTransfer.setData('function', JSON.stringify(item));\n          }\n        \"\n        class=\"function\"\n        data-type=\"rect\"\n        v-for=\"(item, index) in functionData\"\n        :key=\"index\"\n        >功能：{{ item.label }}</el-button\n      >\n    </el-aside>\n    <el-main id=\"main\" :class=\"mainClass\"></el-main>\n    <el-drawer\n      title=\"配置项\"\n      v-model=\"drawer\"\n      direction=\"rtl\"\n      :before-close=\"handleCloseDrawer\"\n    >\n      <p v-for=\"item in 10\" :key=\"item\">&nbsp; &nbsp; 具体配置项{{ item }}</p>\n    </el-drawer>\n  </el-container>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport shourtId from \"shortid\";\nimport G6, { Graph } from \"@antv/g6\";\nimport EditorModes from \"../editorJs/editor-modes.js\";\nimport RegisterNode from \"../editorJs/register-node.js\";\nimport RegisterEdge from \"../editorJs/register-edge.js\";\nimport RegistrationEvents from \"../editorJs/registration-events.js\";\n// import RegisterBehavior from \"../editorJs/register-behavior.js\";\ninterface itemFunction {\n  type: string;\n  label: string;\n}\nexport default defineComponent({\n  name: \"Home\",\n  components: {},\n  data() {\n    return {\n      drawer: false,\n      graph: {} as Graph,\n      mainClass: \"main\",\n      functionData: [\n        {\n          label: \"开始\",\n        },\n        {\n          label: \"过程\",\n        },\n        {\n          label: \"结束\",\n        },\n      ],\n      graphData: {},\n      graphComponentId: shourtId(),\n      sourceAnchorIdx: \"\" || undefined,\n      targetAnchorIdx: \"\" || undefined,\n      startDragNodeIdx: \"\" || undefined,\n      initialPosition: [],\n    };\n  },\n  mounted() {\n    this.initGraph();\n    RegisterNode.setRegisterNode(G6, this);\n    RegisterEdge.setRegisterEdge(G6);\n    // RegisterBehavior.setRegisterBehavior(G6);\n    RegistrationEvents.setRegisterEvent(this);\n  },\n  methods: {\n    showDrawer() {\n      this.drawer = true;\n    },\n    handleCloseDrawer() {\n      this.drawer = false;\n    },\n    /**初始化g6引擎*/\n    initGraph() {\n      const that = this;\n      const _minimap = new G6.Minimap({\n        size: [200, 100],\n      });\n      const _tooltip = new G6.Tooltip();\n      const _grid = new G6.Grid();\n      const _menu = new G6.Menu({\n        itemTypes: [\"node\"],\n        getContent(e) {\n          const outDiv = document.createElement(\"div\");\n          outDiv.style.width = \"80px\";\n          outDiv.style.textAlign = \"center\";\n          outDiv.style.fontSize = \"16px\";\n          outDiv.style.cursor = \"pointer\";\n          outDiv.innerHTML = `<p class='lableMenuText'>删除</p>`;\n          return outDiv;\n        },\n        handleMenuClick(target, item) {\n          that.removeItem(item);\n        },\n      });\n      const graph = new G6.Graph({\n        container: \"main\",\n        plugins: [_grid, _minimap, _menu, _tooltip],\n        modes: EditorModes.getEditorModes(this),\n        nodeStateStyles: {\n          active: {\n            fill: \"red\",\n          },\n        },\n        defaultEdge: {\n          style: {\n            lineWidth: 2,\n            endArrow: {\n              path: G6.Arrow.triangle(),\n              fill: \"#aab7c3\",\n              stroke: \"#aab7c3\",\n            },\n          },\n        },\n        defaultNode: {\n          type: \"rect-node\",\n          size: [100, 50],\n          style: {\n            cursor: \"move\",\n            lineWidth: 2,\n          },\n          labelCfg: {\n            style: {\n              cursor: \"move\",\n            },\n          },\n        },\n      });\n      graph.read(this.graphData);\n      // 不这样写 会有问题 事件不触发\n      this.graph = graph;\n      // 设置样式\n      // (\n      //   document.getElementsByClassName(\"g6-grid-container\")[0] as any\n      // ).style.backgroundColor = \"black\";\n    },\n    /**\n     * @description: 删除节点\n     * @param  {*} item 节点\n     * @return {*}\n     */\n    removeItem(item) {\n      this.graph.removeItem(item);\n    },\n    /** 清除节点状态 */\n    clearItemStates() {\n      this.graph.getNodes().forEach((node) => {\n        this.graph.clearItemStates(node);\n      });\n    },\n    /** 添加图形*/\n    addShap(e: any, shapData: itemFunction) {\n      let _shapData = {\n        id: \"node\" + this.graphComponentId,\n        type: shapData.type || \"rect-node\",\n        label: shapData.label,\n        x: e.x,\n        y: e.y,\n      };\n      this.graph.addItem(\"node\", _shapData);\n      this.graphComponentId = shourtId();\n    },\n  },\n});\n</script>\n<style scoped>\n.sidebar {\n  background: lightblue;\n  height: 100vh;\n}\n.main {\n  height: 100vh;\n  padding: 0;\n  overflow: hidden;\n}\n\n.function {\n  width: 100%;\n  margin-left: 0;\n  cursor: move;\n}\n</style>\n","/*\r\n * @Description : 交互模式\r\n * @Author      : 杨云龙\r\n * @Date        : 2021-06-25 10: 37: 42\r\n * @LastEditTime: 2021-07-16 10:19:48\r\n */\r\n/**上一个选中的节点*/\r\nlet preChoiceNode = {}\r\nclass EditorModes {\r\n    /**\r\n     * @description: 获取交互模式\r\n     * @param  {*}\r\n     * @return {*}\r\n     * @param {*} editorData \r\n     */\r\n    getEditorModes(editorData) {\r\n        return {\r\n            'default': [\r\n                // \"activate-node\",\r\n                \"drag-canvas\",\r\n                \"zoom-canvas\",\r\n                \"activate-relations\",\r\n                {\r\n                    type: \"drag-node\",\r\n                    enableDelegate: true,\r\n                    enableDebounce: true,\r\n                    enableOptimize: true,\r\n                    shouldBegin: (e) => {\r\n                        if (e.target && e.target.get(\"name\") == \"anchor-point\")\r\n                            return false;\r\n                        return true;\r\n                    },\r\n                },\r\n                {\r\n                    type: \"create-edge\",\r\n                    trigger: \"drag\",\r\n                    edgeConfig: {\r\n                        type: \"running-edge\",\r\n                    },\r\n                    shouldBegin: (e) => {\r\n                        // 如果当前节点没有链接码 节点队列中也没有链接码\r\n                        if (!e.item.get('linkStateNum') && !editorData.graph.getNodes()[0].get('linkStateNum')) {\r\n                            e.item.set('linkStateNum', 1)\r\n                        }\r\n                        // 如果当前节点没有链接码 节点队列中有链接码\r\n                        if (!e.item.get('linkStateNum') && editorData.graph.getNodes()[0].get('linkStateNum')) {\r\n                            e.item.set('linkStateNum', editorData.graph.getNodes()[0].get('linkStateNum') + 1)\r\n                        }\r\n                        preChoiceNode = e.item;\r\n                        editorData.startDragNodeIdx = e.item.get('id')\r\n                        if (e.target && e.target.get(\"name\") !== \"anchor-point\")\r\n                            return false;\r\n                        editorData.sourceAnchorIdx = e.target.get(\"anchorPointIdx\");\r\n                        e.target.set(\"links\", e.target.get(\"links\") + 1);\r\n                        return true;\r\n                    },\r\n                    shouldEnd: (e) => {\r\n                        let skip = false;\r\n                        // 如果链接码一样 阻止链接\r\n                        if (e.item.get('linkStateNum') &&\r\n                            preChoiceNode.get('linkStateNum') &&\r\n                            e.item.get('linkStateNum') ==\r\n                            preChoiceNode.get('linkStateNum')) {\r\n                            editorData.$message.error('不支持闭环或下游链接上游，如有需要链接管理员');\r\n                            return false\r\n                        }\r\n\r\n                        // 如果没有链接码 对齐链接码\r\n                        if (!e.item.get('linkStateNum') && e.target.get(\"name\") == \"anchor-point\") {\r\n                            e.item.set('linkStateNum', preChoiceNode.get('linkStateNum'))\r\n                            skip = true;\r\n                        }\r\n                        // 如果有链接码 但是没有被链接 \r\n                        if (e.item.get('linkStateNum') && e.item.getInEdges().length <= 0 && !skip) {\r\n                            editorData.graph.getNodes().forEach(item => {\r\n                                item.set('linkStateNum', preChoiceNode.get('linkStateNum'))\r\n                            })\r\n                        }\r\n                        //  如果有链接码 已经被别的节点链接\r\n                        if (e.item.get('linkStateNum') && e.item.getInEdges().length > 0) {\r\n                            editorData.$message.error('只支持单路模式');\r\n                            return false\r\n                        }\r\n\r\n                        // 锚点操作\r\n                        if (e.target && e.target.get(\"name\") !== \"anchor-point\") {\r\n                            editorData.$message.error('请链接到拖拽点处');\r\n                            return false;\r\n                        }\r\n\r\n                        if (e.target) {\r\n                            editorData.targetAnchorIdx = e.target.get(\"anchorPointIdx\");\r\n                            e.target.set(\"links\", e.target.get(\"links\") + 1);\r\n                            return true;\r\n                        }\r\n                        editorData.targetAnchorIdx = undefined;\r\n                        return true;\r\n                    },\r\n                },\r\n            ],\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default new EditorModes();","/*\r\n * @Description : 自定义节点\r\n * @Author      : 杨云龙\r\n * @Date        : 2021-06-25 10: 21: 22\r\n * @LastEditTime: 2021-07-05 14:05:26\r\n */\r\n\r\nclass RegisterNode {\r\n    /**\r\n     * @description: 注册节点\r\n     * @param  {*}\r\n     * @return {*}\r\n     * @param {*} G6\r\n     */\r\n\r\n    setRegisterNode(G6, editorData) {\r\n        let isDragStart = false;\r\n        editorData.graph.on('point-dragstart', function (dragStartState) {\r\n            isDragStart = dragStartState\r\n        })\r\n        G6.registerNode(\r\n            \"rect-node\", {\r\n                afterDraw(cfg, group) {\r\n                    const bBox = group.getBBox();\r\n                    const anchorPoints = this.getAnchorPoints(cfg);\r\n                    anchorPoints.forEach((anchorPos, i) => {\r\n                        group.addShape('circle', {\r\n                            attrs: {\r\n                                x: bBox.x + bBox.width * anchorPos[0],\r\n                                y: bBox.y + bBox.height * anchorPos[1],\r\n                                r: 12,\r\n                                fill: '#40a9ff',\r\n                                opacity: 0.6,\r\n                            },\r\n                            name: 'back-shape',\r\n                            visible: false,\r\n                            draggable: true,\r\n                        });\r\n                        group.addShape(\"circle\", {\r\n                            attrs: {\r\n                                r: 7,\r\n                                x: bBox.x + bBox.width * anchorPos[0],\r\n                                y: bBox.y + bBox.height * anchorPos[1],\r\n                                fill: \"#fff\",\r\n                                stroke: \"#5F95FF\",\r\n                                cursor: \"crosshair\"\r\n                            },\r\n                            name: `anchor-point`,\r\n                            anchorPointIdx: i,\r\n                            links: 0,\r\n                            visible: false,\r\n                            draggable: true,\r\n                        });\r\n\r\n                    });\r\n                },\r\n                getAnchorPoints() {\r\n                    return [\r\n                        [0.5, 0],\r\n                        [1, 0.5],\r\n                        [0.5, 1],\r\n                        [0, 0.5],\r\n                    ];\r\n                },\r\n\r\n                hideOrShowAnchorPoint(value, item, nodeName) {\r\n                    const anchorPoints = item\r\n                        .getContainer()\r\n                        .findAll((ele) => ele.get(\"name\") === nodeName);\r\n                    anchorPoints.forEach((point) => {\r\n                        if (value || point.get(\"links\") > 0) {\r\n                            point.show();\r\n                        } else {\r\n                            if (isDragStart)\r\n                                return;\r\n                            point.hide();\r\n                        }\r\n                    });\r\n                },\r\n\r\n                setState(name, value, item) {\r\n                    if (name === \"showAnchors\") {\r\n                        this.hideOrShowAnchorPoint(value, item, 'anchor-point');\r\n                        this.hideOrShowAnchorPoint(value, item, 'back-shape');\r\n                    }\r\n\r\n                },\r\n            },\r\n            \"rect\"\r\n        );\r\n    }\r\n}\r\n\r\nexport default new RegisterNode()","/*\n * @Description : 自定义边\n * @Author      : 杨云龙\n * @Date        : 2021-06-25 10: 21: 59\n * @LastEditTime: 2021-07-16 09:11:19\n */\nconst lineDash = [4, 2, 1, 2];\nclass RegisterEdge {\n    setRegisterEdge(G6) {\n        G6.registerEdge(\n            'running-edge', {\n                setState(name, value, item) {\n                    const shape = item.get('keyShape');\n                    if (name === 'active') {\n                        if (value) {\n                            let index = 0;\n                            shape.animate(\n                                () => {\n                                    index++;\n                                    if (index > 9) {\n                                        index = 0;\n                                    }\n                                    const res = {\n                                        lineDash,\n                                        lineDashOffset: -index,\n                                        lineWidth: 3,\n                                        endArrow: {\n                                            path: G6.Arrow.triangle(),\n                                            d: -8,\n                                            fill: \"#aab7c3\",\n                                            stroke: \"#aab7c3\",\n                                            lineDash: []\n                                        },\n                                    };\n                                    return res;\n                                }, {\n                                    repeat: true,\n                                    duration: 3000,\n                                },\n                            );\n                        } else {\n                            shape.stopAnimate();\n                            shape.attr('lineDash', null);\n                        }\n                    }\n                },\n            },\n            'polyline',\n        );\n    }\n}\n\nexport default new RegisterEdge();","/*\r\n * @Description : 注册事件\r\n * @Author      : 杨云龙\r\n * @Date        : 2021-06-25 10: 49: 41\r\n * @LastEditTime: 2021-07-16 10:03:01\r\n */\r\nclass RegistrationEvents {\r\n    /**\r\n     * @description: 注册事件\r\n     * @param  {*}\r\n     * @return {*}\r\n     * @param {*} editorData\r\n     */\r\n    setRegisterEvent(editorData) {\r\n\r\n        /**\r\n         * @description: 监听边创建完\r\n         * @param  {*}\r\n         * @return {*}\r\n         */\r\n        editorData.graph.on(\"aftercreateedge\", (e) => {\r\n            editorData.graph.updateItem(e.edge, {\r\n                sourceAnchor: editorData.sourceAnchorIdx,\r\n                targetAnchor: editorData.targetAnchorIdx,\r\n            });\r\n\r\n            const edges = editorData.graph.save().edges;\r\n            editorData.graph.getEdges().forEach((edge, i) => {\r\n                editorData.graph.updateItem(edge, {\r\n                    curveOffset: edges[i].curveOffset,\r\n                    curvePosition: edges[i].curvePosition,\r\n                });\r\n            });\r\n\r\n        });\r\n\r\n        /**\r\n         * @description: 监听元素创建完\r\n         * @param  {*}\r\n         * @return {*}\r\n         */\r\n        editorData.graph.on(\"afteradditem\", (e) => {\r\n            if (e.item && e.item.getType() === \"edge\") {\r\n                editorData.graph.updateItem(e.item, {\r\n                    sourceAnchor: editorData.sourceAnchorIdx,\r\n                });\r\n            }\r\n        });\r\n        /**\r\n         * @description: 监听元素删除完\r\n         * @param  {*}\r\n         * @return {*}\r\n         */\r\n        editorData.graph.on(\"afterremoveitem\", (e) => {\r\n            if (e.item && e.item.source && e.item.target) {\r\n                const sourceNode = editorData.graph.findById(e.item.source);\r\n                const targetNode = editorData.graph.findById(e.item.target);\r\n                const {\r\n                    sourceAnchor,\r\n                    targetAnchor\r\n                } = e.item;\r\n                if (sourceNode && !isNaN(sourceAnchor)) {\r\n                    const sourceAnchorShape = sourceNode\r\n                        .getContainer()\r\n                        .find(\r\n                            (ele) =>\r\n                            ele.get(\"name\") === \"anchor-point\" &&\r\n                            ele.get(\"anchorPointIdx\") === sourceAnchor\r\n                        );\r\n                    sourceAnchorShape.set(\"links\", sourceAnchorShape.get(\"links\") - 1);\r\n                }\r\n                if (targetNode && !isNaN(targetAnchor)) {\r\n                    const targetAnchorShape = targetNode\r\n                        .getContainer()\r\n                        .find(\r\n                            (ele) =>\r\n                            ele.get(\"name\") === \"anchor-point\" &&\r\n                            ele.get(\"anchorPointIdx\") === targetAnchor\r\n                        );\r\n                    targetAnchorShape.set(\"links\", targetAnchorShape.get(\"links\") - 1);\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        editorData.graph.on(\"drop\", (e) => {\r\n            if (e.originalEvent.dataTransfer) {\r\n                let _shapData = JSON.parse(\r\n                    e.originalEvent.dataTransfer.getData(\"function\")\r\n                );\r\n                editorData.addShap(e, _shapData);\r\n            }\r\n        });\r\n\r\n        editorData.graph.on(\"node:mouseenter\", (evt) => {\r\n            editorData.graph.setItemState(evt.item, \"showAnchors\", true);\r\n        });\r\n\r\n        editorData.graph.on(\"node:mouseleave\", (evt) => {\r\n            editorData.graph.setItemState(evt.item, \"showAnchors\", false);\r\n        });\r\n\r\n        // editorData.graph.on(\"node:dragenter\", (evt) => {\r\n        //     editorData.graph.setItemState(evt.item, \"showAnchors\", true);\r\n        // });\r\n\r\n        // editorData.graph.on(\"node:dragleave\", (evt) => {\r\n        //     editorData.graph.setItemState(evt.item, \"showAnchors\", false);\r\n        // });\r\n\r\n        editorData.graph.on(\"node:dragstart\", (evt) => {\r\n            editorData.graph.setItemState(evt.item, \"showAnchors\", true);\r\n            if (evt.target.get('name') == 'anchor-point') {\r\n                editorData.graph.emit('point-dragstart', true)\r\n                this.ShowOrHideAnchorPoint(true, editorData);\r\n            }\r\n        });\r\n\r\n        editorData.graph.on(\"node:dragend\", (evt) => {\r\n            editorData.graph.setItemState(evt.item, \"showAnchors\", false);\r\n            if (evt.target.get('name') == 'anchor-point') {\r\n                editorData.graph.emit('point-dragstart', false)\r\n                this.ShowOrHideAnchorPoint(false, editorData);\r\n            }\r\n        });\r\n\r\n        editorData.graph.on(\"node:click\", () => {\r\n            editorData.showDrawer();\r\n            editorData.clearItemStates();\r\n        });\r\n\r\n        editorData.graph.on(\"canvas:click\", () => {\r\n            editorData.clearItemStates();\r\n        });\r\n        this.initCanvasMouseAnimation(editorData.graph);\r\n    }\r\n    /**\r\n     * @description: 显示隐藏锚点\r\n     * @param  {*}\r\n     * @return {*}\r\n     */\r\n    ShowOrHideAnchorPoint(visible, {\r\n        graph\r\n    }) {\r\n        const allNodes = graph.getNodes();\r\n        allNodes.forEach(item => {\r\n            const points = item\r\n                .getContainer()\r\n                .findAll((ele) => ele.get(\"name\") === 'anchor-point');\r\n            points.forEach((point) => {\r\n                visible || point.get(\"links\") > 0 ? point.show() : point.hide();\r\n            });\r\n            const pointBacks = item\r\n                .getContainer()\r\n                .findAll((ele) => ele.get(\"name\") === 'back-shape');\r\n            pointBacks.forEach((pointBack) => {\r\n                visible ? pointBack.show() : pointBack.hide();\r\n            });\r\n        })\r\n    }\r\n    /** 初始化画布鼠标动画 */\r\n    initCanvasMouseAnimation(graph) {\r\n        graph.on(\"canvas:mousemove\", () => {\r\n            graph.get(\"canvas\").get(\"el\").style.cursor = \"grab\";\r\n        });\r\n        graph.on(\"canvas:mouseup\", () => {\r\n            graph.get(\"canvas\").get(\"el\").style.cursor = \"grab\";\r\n        });\r\n        graph.on(\"canvas:mousedown\", () => {\r\n            graph.get(\"canvas\").get(\"el\").style.cursor = \"grabbing\";\r\n        });\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default new RegistrationEvents();","\nimport { defineComponent } from \"vue\";\nimport shourtId from \"shortid\";\nimport G6, { Graph } from \"@antv/g6\";\nimport EditorModes from \"../editorJs/editor-modes.js\";\nimport RegisterNode from \"../editorJs/register-node.js\";\nimport RegisterEdge from \"../editorJs/register-edge.js\";\nimport RegistrationEvents from \"../editorJs/registration-events.js\";\n// import RegisterBehavior from \"../editorJs/register-behavior.js\";\ninterface itemFunction {\n  type: string;\n  label: string;\n}\nexport default defineComponent({\n  name: \"Home\",\n  components: {},\n  data() {\n    return {\n      drawer: false,\n      graph: {} as Graph,\n      mainClass: \"main\",\n      functionData: [\n        {\n          label: \"开始\",\n        },\n        {\n          label: \"过程\",\n        },\n        {\n          label: \"结束\",\n        },\n      ],\n      graphData: {},\n      graphComponentId: shourtId(),\n      sourceAnchorIdx: \"\" || undefined,\n      targetAnchorIdx: \"\" || undefined,\n      startDragNodeIdx: \"\" || undefined,\n      initialPosition: [],\n    };\n  },\n  mounted() {\n    this.initGraph();\n    RegisterNode.setRegisterNode(G6, this);\n    RegisterEdge.setRegisterEdge(G6);\n    // RegisterBehavior.setRegisterBehavior(G6);\n    RegistrationEvents.setRegisterEvent(this);\n  },\n  methods: {\n    showDrawer() {\n      this.drawer = true;\n    },\n    handleCloseDrawer() {\n      this.drawer = false;\n    },\n    /**初始化g6引擎*/\n    initGraph() {\n      const that = this;\n      const _minimap = new G6.Minimap({\n        size: [200, 100],\n      });\n      const _tooltip = new G6.Tooltip();\n      const _grid = new G6.Grid();\n      const _menu = new G6.Menu({\n        itemTypes: [\"node\"],\n        getContent(e) {\n          const outDiv = document.createElement(\"div\");\n          outDiv.style.width = \"80px\";\n          outDiv.style.textAlign = \"center\";\n          outDiv.style.fontSize = \"16px\";\n          outDiv.style.cursor = \"pointer\";\n          outDiv.innerHTML = `<p class='lableMenuText'>删除</p>`;\n          return outDiv;\n        },\n        handleMenuClick(target, item) {\n          that.removeItem(item);\n        },\n      });\n      const graph = new G6.Graph({\n        container: \"main\",\n        plugins: [_grid, _minimap, _menu, _tooltip],\n        modes: EditorModes.getEditorModes(this),\n        nodeStateStyles: {\n          active: {\n            fill: \"red\",\n          },\n        },\n        defaultEdge: {\n          style: {\n            lineWidth: 2,\n            endArrow: {\n              path: G6.Arrow.triangle(),\n              fill: \"#aab7c3\",\n              stroke: \"#aab7c3\",\n            },\n          },\n        },\n        defaultNode: {\n          type: \"rect-node\",\n          size: [100, 50],\n          style: {\n            cursor: \"move\",\n            lineWidth: 2,\n          },\n          labelCfg: {\n            style: {\n              cursor: \"move\",\n            },\n          },\n        },\n      });\n      graph.read(this.graphData);\n      // 不这样写 会有问题 事件不触发\n      this.graph = graph;\n      // 设置样式\n      // (\n      //   document.getElementsByClassName(\"g6-grid-container\")[0] as any\n      // ).style.backgroundColor = \"black\";\n    },\n    /**\n     * @description: 删除节点\n     * @param  {*} item 节点\n     * @return {*}\n     */\n    removeItem(item) {\n      this.graph.removeItem(item);\n    },\n    /** 清除节点状态 */\n    clearItemStates() {\n      this.graph.getNodes().forEach((node) => {\n        this.graph.clearItemStates(node);\n      });\n    },\n    /** 添加图形*/\n    addShap(e: any, shapData: itemFunction) {\n      let _shapData = {\n        id: \"node\" + this.graphComponentId,\n        type: shapData.type || \"rect-node\",\n        label: shapData.label,\n        x: e.x,\n        y: e.y,\n      };\n      this.graph.addItem(\"node\", _shapData);\n      this.graphComponentId = shourtId();\n    },\n  },\n});\n","import { render } from \"./Editor.vue?vue&type=template&id=1fb00070&scoped=true\"\nimport script from \"./Editor.vue?vue&type=script&lang=ts\"\nexport * from \"./Editor.vue?vue&type=script&lang=ts\"\n\nimport \"./Editor.vue?vue&type=style&index=0&id=1fb00070&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-1fb00070\"\n\nexport default script","import { createRouter, createWebHashHistory, RouteRecordRaw } from \"vue-router\";\r\nimport Editor from \"../views/Editor.vue\";\r\n\r\nconst routes: Array<RouteRecordRaw> = [\r\n  {\r\n    path: \"/\",\r\n    name: \"Editor\",\r\n    component: Editor,\r\n  },\r\n  {\r\n    path: \"/about\",\r\n    name: \"About\",\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () =>\r\n      import(/* webpackChunkName: \"about\" */ \"../views/About.vue\"),\r\n  },\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory(),\r\n  routes,\r\n});\r\n\r\nexport default router;\r\n","import { createStore } from \"vuex\";\n\nexport default createStore({\n  state: {},\n  mutations: {},\n  actions: {},\n  modules: {},\n});\n","import { createApp } from \"vue\";\nimport ElementPlus from \"element-plus\";\nimport \"element-plus/lib/theme-chalk/index.css\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\n\ncreateApp(App).use(ElementPlus).use(store).use(router).mount(\"#app\");\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Editor.vue?vue&type=style&index=0&id=1fb00070&scoped=true&lang=css\""],"sourceRoot":""}